# Data wrangling applications for LLMs

Code to see if we can convert CSV to JSON using LLMs, including some data transformations.

## Sample CSV

Sourced from the internet - [Sample CSV](https://people.sc.fsu.edu/~jburkardt/data/csv/csv.html)

```csv
Index,Customer Id,First Name,Last Name,Company,City,Country,Phone 1,Phone 2,Email,Subscription Date,Website
1,DD37Cf93aecA6Dc,Sheryl,Baxter,Rasmussen Group,East Leonard,Chile,229.077.5154,397.884.0519x718,zunigavanessa@smith.info,2020-08-24,http://www.stephenson.com/
2,1Ef7b82A4CAAD10,Preston,Lozano,Vega-Gentry,East Jimmychester,Djibouti,5153435776,686-620-1820x944,vmata@colon.com,2021-04-23,http://www.hobbs.com/
```

Prompt: [_prompts/transform-csv-json](./_prompts/transform-csv-json.md)

Output

```json
  {
    "Id": "DD37Cf93aecA6Dc",
    "Fullname": "Sheryl Baxter",
    "Company": "Rasmussen Group",
    "City": "East Leonard",
    "Country": "Chile",
    "Phone 1": "229.077.5154",
    "E-mail": "zunigavanessa@smith.info",
    "Sub_date": "2020-08-24",
    "URL": "http://www.stephenson.com/"
  },
```
(Code actually taken from LLM output)

## Findings

- The model is able to convert CSV to JSON with a high degree of accuracy.
- 'Schema' transformation works very well. E.g. `Customer Id` to `Id`, `First Name` and `Last Name` to `Fullname`, etc.
- Token limits will be a problem for large CSV files. 
- Hence the 2nd prompt that generates the code to convert CSV to JSON: [_prompts/transform-csv-python](./_prompts/transform-csv-python.md)
- That works fine as well - as we know from ChatGPT or GitHub Copilot.

Here's sample code generated by GPT-3:

```python
    for row in reader:
        json_row = {
            "Id": row["Customer Id"],
            "Fullname": f"{row['First Name']} {row['Last Name']}",
            "Company": row["Company"],
            "City": row["City"],
            "Country": row["Country"],
            "Phone 1": format_phone(row["Phone 1"]) or format_phone(row["Phone 2"]),
            "E-mail": row["Email"],
            "Sub_date": format_date(row["Subscription Date"]),
            "URL": row["Website"]
        }
        data.append(json_row)
```

